<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Labyrinthe: Référence du fichier serialization.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Labyrinthe
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Projet de langage C - Labyrinthe ENSICAEN 1A</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Recherche');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="annotated.html"><span>Structures&#160;de&#160;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Recherche" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Liste&#160;des&#160;fichiers</span></a></li>
      <li><a href="globals.html"><span>Variables&#160;globale</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('serialization_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Tout</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Structures de données</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Fichiers</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Fonctions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Définitions de type</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Fonctions</a>  </div>
  <div class="headertitle">
<div class="title">Référence du fichier serialization.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="serialization_8h_source.html">serialization.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div>
<p><a href="serialization_8c_source.html">Aller au code source de ce fichier.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Fonctions</h2></td></tr>
<tr class="memitem:a84d3cd07f4bcbe45e4dadffae34fa723"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_player___score__str__t.html">Player_Score_str_t</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serialization_8c.html#a84d3cd07f4bcbe45e4dadffae34fa723">score_manage</a> (char *scoreFileName, <a class="el" href="struct_player___score__str__t.html">Player_Score_str_t</a> Scoring_data)</td></tr>
<tr class="memdesc:a84d3cd07f4bcbe45e4dadffae34fa723"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction permettant de gérer l'enregistrement d'un nouveau score dans un fichier. La limite imposée est de 10 scores par fichier. Le score le plus faible sera toujours remplacé par un score plus élevé. La fonction retournera ensuite l'ensemble des scores, triés par ordre décroissants.  <a href="#a84d3cd07f4bcbe45e4dadffae34fa723">Plus de détails...</a><br /></td></tr>
<tr class="separator:a84d3cd07f4bcbe45e4dadffae34fa723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08b508913be98637331aea21dba2ac5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serialization_8c.html#a08b508913be98637331aea21dba2ac5d">serialize_labyrinthe_to_buffer</a> (<a class="el" href="labyrinthe_8h.html#a635e69b4b8a1e09ca9a01d30559ebec7">Labyrinthe</a> *<a class="el" href="laby__game_8c.html#a25906a99ac156db2a45fb02be50f480b">lab</a>, size_t *sizeOfBuffer)</td></tr>
<tr class="memdesc:a08b508913be98637331aea21dba2ac5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction réalisant la conversion d'un labyrinthe vers un buffer de donnée prêt à enregistrer dans un fichier.  <a href="#a08b508913be98637331aea21dba2ac5d">Plus de détails...</a><br /></td></tr>
<tr class="separator:a08b508913be98637331aea21dba2ac5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e046ccb8922f6fe7a22de1a2712ff2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serialization_8c.html#af5e046ccb8922f6fe7a22de1a2712ff2">serialize_cell</a> (<a class="el" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a> *dst, const <a class="el" href="labyrinthe_8h.html#a82736ab0a9cebda7089540f9e7d9564e">Laby_Cell_str_t</a> *cell)</td></tr>
<tr class="memdesc:af5e046ccb8922f6fe7a22de1a2712ff2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sous-fonction réalisant la sérialisation d'une cellule vers un BUFFER. Par convéniance, la fonction prend en entrée un BUFFER* initial et retourne un autre pointeur vers ce même buffer, pointant après la dernière donnée ajoutée. 10 octets seront stockés : Cellule avec entité : &lt;(1)type&gt;&lt;(2)param1&gt;&lt;(2)param2&gt;&lt;(1)type&gt;&lt;(2)param1&gt;&lt;(2)param2&gt; Cellule sans entité : &lt;(1)type&gt;&lt;(2)param1&gt;&lt;(2)param2&gt;&lt;0x00&gt;&lt;0x0000&gt;&lt;0x0000&gt;  <a href="#af5e046ccb8922f6fe7a22de1a2712ff2">Plus de détails...</a><br /></td></tr>
<tr class="separator:af5e046ccb8922f6fe7a22de1a2712ff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6af58142f2ae4cde3927946a6c2636a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="labyrinthe_8h.html#a635e69b4b8a1e09ca9a01d30559ebec7">Labyrinthe</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serialization_8c.html#ab6af58142f2ae4cde3927946a6c2636a">serialize_buffer_to_labyrinthe</a> (<a class="el" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a> *buff)</td></tr>
<tr class="memdesc:ab6af58142f2ae4cde3927946a6c2636a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Permet de reconstruire un labyrinthe à partir d'un BUFFER de données.  <a href="#ab6af58142f2ae4cde3927946a6c2636a">Plus de détails...</a><br /></td></tr>
<tr class="separator:ab6af58142f2ae4cde3927946a6c2636a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Documentation des fonctions</h2>
<a class="anchor" id="a84d3cd07f4bcbe45e4dadffae34fa723"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_player___score__str__t.html">Player_Score_str_t</a>** score_manage </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>scoreFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_player___score__str__t.html">Player_Score_str_t</a>&#160;</td>
          <td class="paramname"><em>Scoring_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction permettant de gérer l'enregistrement d'un nouveau score dans un fichier. La limite imposée est de 10 scores par fichier. Le score le plus faible sera toujours remplacé par un score plus élevé. La fonction retournera ensuite l'ensemble des scores, triés par ordre décroissants. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">scoreFileName</td><td>Nom du fichier de score avec extension </td></tr>
    <tr><td class="paramname">Scoring_data</td><td>Nouveau score à enregistrer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd><a class="el" href="struct_player___score__str__t.html" title="Structure représentant un résultat de score d&#39;un joueur. ">Player_Score_str_t</a> Scores chargés par la fonction, triés par ordre décroissants. </dd></dl>

<p>Définition à la ligne <a class="el" href="serialization_8c_source.html#l00024">24</a> du fichier <a class="el" href="serialization_8c_source.html">serialization.c</a>.</p>

<p>Références <a class="el" href="gameplay_8h_source.html#l00055">Player_Score_str_t::score</a>.</p>

<p>Référencé par <a class="el" href="laby__game_8c_source.html#l00436">laby_game_scoring_handling()</a>.</p>
<div class="fragment"><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;                                                                                       {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    FILE* scoreFile;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordtype">int</span> numbersOfScore = 0;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a> **scores = NULL;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">if</span>(scoreFileName == NULL)</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    scoreFile = fopen(scoreFileName, <span class="stringliteral">&quot;a+&quot;</span>);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">if</span>(scoreFile == NULL)</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    scores = calloc(10,<span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>*)); <span class="comment">/* calloc mettra à 0 &lt;=&gt; NULL les champs */</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    rewind(scoreFile);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    fseek(scoreFile, 0, SEEK_END);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    numbersOfScore = (int)ftell(scoreFile) / <span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    fclose(scoreFile);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">if</span> (numbersOfScore &lt; 10) { <span class="comment">/* Moins de 10 scores ou fichier inexistant */</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> currentIndex = 0;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        fopen(scoreFileName, <span class="stringliteral">&quot;a+&quot;</span>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        fwrite(&amp;Scoring_data, 1, <span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>), scoreFile);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        rewind(scoreFile);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="comment">/* On lit l&#39;ensemble des scores */</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">while</span>(1) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            <a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a> tmp;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            i = (int)fread(&amp;tmp, 1, <span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>), scoreFile);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            <span class="keywordflow">if</span>(i &lt;= 0)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            scores[currentIndex] = (<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>));</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            memcpy(scores[currentIndex], &amp;tmp, <span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>));</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            currentIndex++;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">else</span> { <span class="comment">/* Ecraser le plus petit */</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> indexLowest = 0,currentIndex = 0;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="project__defines_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> lowestScore = 0xFFFFFFFF;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        fopen(scoreFileName, <span class="stringliteral">&quot;r+&quot;</span>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        rewind(scoreFile);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">while</span>(1){</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a> tmp;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            i = (int)fread(&amp;tmp, 1, <span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>), scoreFile);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <span class="keywordflow">if</span>(i == 0)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            scores[currentIndex] = (<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>));</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            memcpy(scores[currentIndex], &amp;tmp, <span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>));</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keywordflow">if</span>(lowestScore &gt; tmp.<a class="code" href="struct_player___score__str__t.html#abe902382ebcf927bbba5c0d47bf53138">score</a>)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            {indexLowest = currentIndex; lowestScore = tmp.<a class="code" href="struct_player___score__str__t.html#abe902382ebcf927bbba5c0d47bf53138">score</a>;}</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            currentIndex++;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        fseek(scoreFile, indexLowest*<span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>), SEEK_SET);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        fwrite(&amp;Scoring_data, 1, <span class="keyword">sizeof</span>(<a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a>), scoreFile);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        *scores[indexLowest] = Scoring_data;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    fclose(scoreFile);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">/* On trie le tableau par ordre décroissant avec un tri par insertion */</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">for</span>(i = numbersOfScore; i &gt; 0; i--){</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordtype">int</span> d;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        d = i;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">while</span> (scores[d] != NULL &amp;&amp; scores[d - 1] != NULL &amp;&amp; d &gt; 0) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">if</span>(scores[d]-&gt;score &gt; scores[d-1]-&gt;score){</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <a class="code" href="struct_player___score__str__t.html">Player_Score_str_t</a> tmp;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                tmp = *scores[d];</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                *scores[d] = *(scores[d-1]);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                *(scores[d-1]) = tmp;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            d--;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> scores;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="ttc" id="project__defines_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="project__defines_8h_source.html#l00028">project_defines.h:28</a></div></div>
<div class="ttc" id="struct_player___score__str__t_html"><div class="ttname"><a href="struct_player___score__str__t.html">Player_Score_str_t</a></div><div class="ttdoc">Structure représentant un résultat de score d&#39;un joueur. </div><div class="ttdef"><b>Definition:</b> <a href="gameplay_8h_source.html#l00053">gameplay.h:53</a></div></div>
<div class="ttc" id="project__defines_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="project__defines_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="project__defines_8h_source.html#l00034">project_defines.h:34</a></div></div>
<div class="ttc" id="struct_player___score__str__t_html_abe902382ebcf927bbba5c0d47bf53138"><div class="ttname"><a href="struct_player___score__str__t.html#abe902382ebcf927bbba5c0d47bf53138">Player_Score_str_t::score</a></div><div class="ttdeci">uint32_t score</div><div class="ttdef"><b>Definition:</b> <a href="gameplay_8h_source.html#l00055">gameplay.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab6af58142f2ae4cde3927946a6c2636a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="labyrinthe_8h.html#a635e69b4b8a1e09ca9a01d30559ebec7">Labyrinthe</a> serialize_buffer_to_labyrinthe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Permet de reconstruire un labyrinthe à partir d'un BUFFER de données. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">Pointeurs</td><td>vers les données du labyrinthe </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>Labyrinthe Labyrinthe reconsitué. </dd></dl>

<p>Définition à la ligne <a class="el" href="serialization_8c_source.html#l00193">193</a> du fichier <a class="el" href="serialization_8c_source.html">serialization.c</a>.</p>

<p>Références <a class="el" href="matrice_8h_source.html#l00037">Matrice::donnees</a>, <a class="el" href="labyrinthe_8h_source.html#l00104">Laby_Cell_str::entity</a>, <a class="el" href="labyrinthe_8c_source.html#l00047">labyrinthe_alloc()</a>, <a class="el" href="serialization_8h_source.html#l00035">MAGIC_BYTE</a>, <a class="el" href="matrice_8h_source.html#l00039">Matrice::nbcolonnes</a>, <a class="el" href="matrice_8h_source.html#l00038">Matrice::nblignes</a>, <a class="el" href="labyrinthe_8h_source.html#l00085">Laby_Entity_str_t::param1</a>, <a class="el" href="labyrinthe_8h_source.html#l00102">Laby_Cell_str::param1</a>, <a class="el" href="labyrinthe_8h_source.html#l00086">Laby_Entity_str_t::param2</a>, <a class="el" href="labyrinthe_8h_source.html#l00103">Laby_Cell_str::param2</a>, <a class="el" href="project__defines_8h_source.html#l00057">PRINTDF</a>, <a class="el" href="project__defines_8h_source.html#l00060">SUCCESS</a>, <a class="el" href="labyrinthe_8h_source.html#l00084">Laby_Entity_str_t::type</a>, et <a class="el" href="labyrinthe_8h_source.html#l00101">Laby_Cell_str::type</a>.</p>

<p>Référencé par <a class="el" href="laby__game_8c_source.html#l00194">laby_game_init_options()</a>, et <a class="el" href="laby__game_8c_source.html#l00112">laby_game_loader_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                                        {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="struct_matrice.html">Labyrinthe</a> laby;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordtype">int</span> i,j;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a>* pBuffer = NULL;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="struct_laby___cell__str.html">Laby_Cell_str_t</a>** cells = NULL;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    laby.<a class="code" href="struct_matrice.html#a12e3728259177655e1c0bdeee024b306">nblignes</a> = 0;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    laby.<a class="code" href="struct_matrice.html#a345faae7be119ee5b067e36a26801409">nbcolonnes</a> = 0;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    laby.<a class="code" href="struct_matrice.html#a0ed1f891ac3730a64bdfc92feec201b2">donnees</a> = NULL;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span>(buff == NULL)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">return</span> laby;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    pBuffer = buff;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span>(*((<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>*)pBuffer) != <a class="code" href="serialization_8h.html#a3455653da0de1178f9b079fb7d6626be">MAGIC_BYTE</a>){</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <a class="code" href="project__defines_8h.html#ac2f0bff4960a62644276f5c19c6952f7">PRINTDF</a>((<span class="stringliteral">&quot;Le labyrinthe semble être invalide. Oops.\n&quot;</span>));</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">return</span> laby;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="labyrinthe_8c.html#a135c723a5811ad30fd17c09e92fce63a">labyrinthe_alloc</a>(((<span class="keywordtype">int</span>*)pBuffer)[0],((<span class="keywordtype">int</span>*)pBuffer)[1],&amp;laby) != <a class="code" href="project__defines_8h.html#aa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>){</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        laby.<a class="code" href="struct_matrice.html#a345faae7be119ee5b067e36a26801409">nbcolonnes</a> = 0;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        laby.<a class="code" href="struct_matrice.html#a12e3728259177655e1c0bdeee024b306">nblignes</a> = 0;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        laby.<a class="code" href="struct_matrice.html#a0ed1f891ac3730a64bdfc92feec201b2">donnees</a> = NULL;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">return</span> laby;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    cells = (<a class="code" href="struct_laby___cell__str.html">Laby_Cell_str_t</a>**)laby.<a class="code" href="struct_matrice.html#a0ed1f891ac3730a64bdfc92feec201b2">donnees</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span>(cells == NULL){</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        laby.<a class="code" href="struct_matrice.html#a345faae7be119ee5b067e36a26801409">nbcolonnes</a> = 0;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        laby.<a class="code" href="struct_matrice.html#a12e3728259177655e1c0bdeee024b306">nblignes</a> = 0;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        laby.<a class="code" href="struct_matrice.html#a0ed1f891ac3730a64bdfc92feec201b2">donnees</a> = NULL;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">return</span> laby;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + 2*<span class="keyword">sizeof</span>(int); <span class="comment">/* On passe les deux premiers entiers déjà lu */</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; laby.<a class="code" href="struct_matrice.html#a12e3728259177655e1c0bdeee024b306">nblignes</a>; i++)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">for</span>(j = 0; j &lt; laby.<a class="code" href="struct_matrice.html#a345faae7be119ee5b067e36a26801409">nbcolonnes</a>; j++){</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            cells[i][j].<a class="code" href="struct_laby___cell__str.html#a1d127017fb298b889f4ba24752d08b8e">type</a> = *(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>*)pBuffer;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            cells[i][j].<a class="code" href="struct_laby___cell__str.html#a1f17cfc419258de8dcdd21bc5494e489">param1</a> = *(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>*)pBuffer;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            cells[i][j].<a class="code" href="struct_laby___cell__str.html#a16a7565b150a9c17a39c80fc932b9514">param2</a> = *(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>*)pBuffer;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keywordflow">if</span>(*(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>*)pBuffer != 0x00) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                cells[i][j].<a class="code" href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">entity</a> = (<a class="code" href="struct_laby___entity__str__t.html">Laby_Entity_str_t</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_laby___entity__str__t.html">Laby_Entity_str_t</a>));</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                cells[i][j].<a class="code" href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">entity</a>-&gt;<a class="code" href="struct_laby___entity__str__t.html#a1d127017fb298b889f4ba24752d08b8e">type</a> = *(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>*)pBuffer;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                cells[i][j].<a class="code" href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">entity</a>-&gt;<a class="code" href="struct_laby___entity__str__t.html#a1f17cfc419258de8dcdd21bc5494e489">param1</a> = *(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>*)pBuffer;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                cells[i][j].<a class="code" href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">entity</a>-&gt;<a class="code" href="struct_laby___entity__str__t.html#a16a7565b150a9c17a39c80fc932b9514">param2</a> = *(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>*)pBuffer;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                cells[i][j].<a class="code" href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">entity</a> = NULL;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>) + 2*<span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">return</span> laby;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="ttc" id="struct_laby___cell__str_html_a16a7565b150a9c17a39c80fc932b9514"><div class="ttname"><a href="struct_laby___cell__str.html#a16a7565b150a9c17a39c80fc932b9514">Laby_Cell_str::param2</a></div><div class="ttdeci">uint16_t param2</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00103">labyrinthe.h:103</a></div></div>
<div class="ttc" id="struct_laby___entity__str__t_html_a1f17cfc419258de8dcdd21bc5494e489"><div class="ttname"><a href="struct_laby___entity__str__t.html#a1f17cfc419258de8dcdd21bc5494e489">Laby_Entity_str_t::param1</a></div><div class="ttdeci">uint16_t param1</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00085">labyrinthe.h:85</a></div></div>
<div class="ttc" id="struct_matrice_html_a345faae7be119ee5b067e36a26801409"><div class="ttname"><a href="struct_matrice.html#a345faae7be119ee5b067e36a26801409">Matrice::nbcolonnes</a></div><div class="ttdeci">int nbcolonnes</div><div class="ttdef"><b>Definition:</b> <a href="matrice_8h_source.html#l00039">matrice.h:39</a></div></div>
<div class="ttc" id="serialization_8h_html_a3455653da0de1178f9b079fb7d6626be"><div class="ttname"><a href="serialization_8h.html#a3455653da0de1178f9b079fb7d6626be">MAGIC_BYTE</a></div><div class="ttdeci">#define MAGIC_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="serialization_8h_source.html#l00035">serialization.h:35</a></div></div>
<div class="ttc" id="struct_laby___cell__str_html_acc66c86148aa389dce9c40ce26a22a1e"><div class="ttname"><a href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">Laby_Cell_str::entity</a></div><div class="ttdeci">Laby_Entity_str_t * entity</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00104">labyrinthe.h:104</a></div></div>
<div class="ttc" id="labyrinthe_8c_html_a135c723a5811ad30fd17c09e92fce63a"><div class="ttname"><a href="labyrinthe_8c.html#a135c723a5811ad30fd17c09e92fce63a">labyrinthe_alloc</a></div><div class="ttdeci">int labyrinthe_alloc(int length, int width, Labyrinthe *lab)</div><div class="ttdoc">Fonction réalisant l&#39;allocation d&#39;un labyrinthe en fonction d&#39;une longueur et d&#39;une largeur...</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8c_source.html#l00047">labyrinthe.c:47</a></div></div>
<div class="ttc" id="struct_laby___cell__str_html"><div class="ttname"><a href="struct_laby___cell__str.html">Laby_Cell_str</a></div><div class="ttdoc">Structure représentative d&#39;une cellule, pointant vers les cellules adjacentes et disposant d&#39;informat...</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00098">labyrinthe.h:98</a></div></div>
<div class="ttc" id="project__defines_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="project__defines_8h_source.html#l00028">project_defines.h:28</a></div></div>
<div class="ttc" id="struct_laby___entity__str__t_html"><div class="ttname"><a href="struct_laby___entity__str__t.html">Laby_Entity_str_t</a></div><div class="ttdoc">Structure représentant une entité dans le labyrinthe, contenant l&#39;ensemble des données nécessaires à ...</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00083">labyrinthe.h:83</a></div></div>
<div class="ttc" id="struct_laby___cell__str_html_a1d127017fb298b889f4ba24752d08b8e"><div class="ttname"><a href="struct_laby___cell__str.html#a1d127017fb298b889f4ba24752d08b8e">Laby_Cell_str::type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00101">labyrinthe.h:101</a></div></div>
<div class="ttc" id="struct_matrice_html_a12e3728259177655e1c0bdeee024b306"><div class="ttname"><a href="struct_matrice.html#a12e3728259177655e1c0bdeee024b306">Matrice::nblignes</a></div><div class="ttdeci">int nblignes</div><div class="ttdef"><b>Definition:</b> <a href="matrice_8h_source.html#l00038">matrice.h:38</a></div></div>
<div class="ttc" id="serialization_8h_html_a4f6d63f018385b065d2661bea59520a1"><div class="ttname"><a href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a></div><div class="ttdeci">void BUFFER</div><div class="ttdoc">Redéfinition du type de donnée "void" en BUFFER, plus explicite. </div><div class="ttdef"><b>Definition:</b> <a href="serialization_8h_source.html#l00041">serialization.h:41</a></div></div>
<div class="ttc" id="struct_laby___cell__str_html_a1f17cfc419258de8dcdd21bc5494e489"><div class="ttname"><a href="struct_laby___cell__str.html#a1f17cfc419258de8dcdd21bc5494e489">Laby_Cell_str::param1</a></div><div class="ttdeci">uint16_t param1</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00102">labyrinthe.h:102</a></div></div>
<div class="ttc" id="struct_matrice_html_a0ed1f891ac3730a64bdfc92feec201b2"><div class="ttname"><a href="struct_matrice.html#a0ed1f891ac3730a64bdfc92feec201b2">Matrice::donnees</a></div><div class="ttdeci">void ** donnees</div><div class="ttdef"><b>Definition:</b> <a href="matrice_8h_source.html#l00037">matrice.h:37</a></div></div>
<div class="ttc" id="project__defines_8h_html_a273cf69d639a59973b6019625df33e30"><div class="ttname"><a href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></div><div class="ttdeci">unsigned short uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="project__defines_8h_source.html#l00030">project_defines.h:30</a></div></div>
<div class="ttc" id="project__defines_8h_html_aa90cac659d18e8ef6294c7ae337f6b58"><div class="ttname"><a href="project__defines_8h.html#aa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a></div><div class="ttdeci">#define SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="project__defines_8h_source.html#l00060">project_defines.h:60</a></div></div>
<div class="ttc" id="struct_laby___entity__str__t_html_a16a7565b150a9c17a39c80fc932b9514"><div class="ttname"><a href="struct_laby___entity__str__t.html#a16a7565b150a9c17a39c80fc932b9514">Laby_Entity_str_t::param2</a></div><div class="ttdeci">uint16_t param2</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00086">labyrinthe.h:86</a></div></div>
<div class="ttc" id="project__defines_8h_html_ac2f0bff4960a62644276f5c19c6952f7"><div class="ttname"><a href="project__defines_8h.html#ac2f0bff4960a62644276f5c19c6952f7">PRINTDF</a></div><div class="ttdeci">#define PRINTDF(X)</div><div class="ttdef"><b>Definition:</b> <a href="project__defines_8h_source.html#l00057">project_defines.h:57</a></div></div>
<div class="ttc" id="struct_matrice_html"><div class="ttname"><a href="struct_matrice.html">Matrice</a></div><div class="ttdoc">Structure représentative d&#39;une Matrice de données, avec son compte de lignes et de colonnes...</div><div class="ttdef"><b>Definition:</b> <a href="matrice_8h_source.html#l00036">matrice.h:36</a></div></div>
<div class="ttc" id="struct_laby___entity__str__t_html_a1d127017fb298b889f4ba24752d08b8e"><div class="ttname"><a href="struct_laby___entity__str__t.html#a1d127017fb298b889f4ba24752d08b8e">Laby_Entity_str_t::type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00084">labyrinthe.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af5e046ccb8922f6fe7a22de1a2712ff2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a>* serialize_cell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a> *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="labyrinthe_8h.html#a82736ab0a9cebda7089540f9e7d9564e">Laby_Cell_str_t</a> *&#160;</td>
          <td class="paramname"><em>cell</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sous-fonction réalisant la sérialisation d'une cellule vers un BUFFER. Par convéniance, la fonction prend en entrée un BUFFER* initial et retourne un autre pointeur vers ce même buffer, pointant après la dernière donnée ajoutée. 10 octets seront stockés : Cellule avec entité : &lt;(1)type&gt;&lt;(2)param1&gt;&lt;(2)param2&gt;&lt;(1)type&gt;&lt;(2)param1&gt;&lt;(2)param2&gt; Cellule sans entité : &lt;(1)type&gt;&lt;(2)param1&gt;&lt;(2)param2&gt;&lt;0x00&gt;&lt;0x0000&gt;&lt;0x0000&gt; </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>BUFFER dans lequel stocker les données de la cellule cell </td></tr>
    <tr><td class="paramname">cell</td><td>Cellule dont les données </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>BUFFER Pointeur correspondant à dst décallé de 10 octets. </dd></dl>

<p>Définition à la ligne <a class="el" href="serialization_8c_source.html#l00155">155</a> du fichier <a class="el" href="serialization_8c_source.html">serialization.c</a>.</p>

<p>Références <a class="el" href="labyrinthe_8h_source.html#l00104">Laby_Cell_str::entity</a>, <a class="el" href="labyrinthe_8h_source.html#l00085">Laby_Entity_str_t::param1</a>, <a class="el" href="labyrinthe_8h_source.html#l00102">Laby_Cell_str::param1</a>, <a class="el" href="labyrinthe_8h_source.html#l00086">Laby_Entity_str_t::param2</a>, <a class="el" href="labyrinthe_8h_source.html#l00103">Laby_Cell_str::param2</a>, <a class="el" href="labyrinthe_8h_source.html#l00084">Laby_Entity_str_t::type</a>, et <a class="el" href="labyrinthe_8h_source.html#l00101">Laby_Cell_str::type</a>.</p>

<p>Référencé par <a class="el" href="serialization_8c_source.html#l00116">serialize_labyrinthe_to_buffer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                                                 {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a>* pBuffer = NULL;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span>(dst == NULL || cell == NULL)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    pBuffer = dst;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    memcpy(pBuffer, &amp;cell-&gt;<a class="code" href="struct_laby___cell__str.html#a1d127017fb298b889f4ba24752d08b8e">type</a>, <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>));</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    memcpy(pBuffer, &amp;cell-&gt;<a class="code" href="struct_laby___cell__str.html#a1f17cfc419258de8dcdd21bc5494e489">param1</a>, <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>));</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    memcpy(pBuffer, &amp;cell-&gt;<a class="code" href="struct_laby___cell__str.html#a16a7565b150a9c17a39c80fc932b9514">param2</a>, <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>));</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span>(cell-&gt;<a class="code" href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">entity</a> != NULL) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">/* Une entité est présente, on sauvegarde */</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        memcpy(pBuffer, &amp;cell-&gt;<a class="code" href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">entity</a>-&gt;<a class="code" href="struct_laby___entity__str__t.html#a1d127017fb298b889f4ba24752d08b8e">type</a>, <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>));</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        memcpy(pBuffer, &amp;cell-&gt;<a class="code" href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">entity</a>-&gt;<a class="code" href="struct_laby___entity__str__t.html#a1f17cfc419258de8dcdd21bc5494e489">param1</a>, <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>));</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        memcpy(pBuffer, &amp;cell-&gt;<a class="code" href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">entity</a>-&gt;<a class="code" href="struct_laby___entity__str__t.html#a16a7565b150a9c17a39c80fc932b9514">param2</a>, <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>));</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="comment">/* Sinon, on assigne 5 octets à 0x00  &lt;=&gt; 1 octet à 0x00 + 2 octets à 0x0000) */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        memset(pBuffer, 0x00, <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>) + 2*<span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>));</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>) + 2*<span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">return</span> pBuffer;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div>
<div class="ttc" id="struct_laby___cell__str_html_a16a7565b150a9c17a39c80fc932b9514"><div class="ttname"><a href="struct_laby___cell__str.html#a16a7565b150a9c17a39c80fc932b9514">Laby_Cell_str::param2</a></div><div class="ttdeci">uint16_t param2</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00103">labyrinthe.h:103</a></div></div>
<div class="ttc" id="struct_laby___entity__str__t_html_a1f17cfc419258de8dcdd21bc5494e489"><div class="ttname"><a href="struct_laby___entity__str__t.html#a1f17cfc419258de8dcdd21bc5494e489">Laby_Entity_str_t::param1</a></div><div class="ttdeci">uint16_t param1</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00085">labyrinthe.h:85</a></div></div>
<div class="ttc" id="struct_laby___cell__str_html_acc66c86148aa389dce9c40ce26a22a1e"><div class="ttname"><a href="struct_laby___cell__str.html#acc66c86148aa389dce9c40ce26a22a1e">Laby_Cell_str::entity</a></div><div class="ttdeci">Laby_Entity_str_t * entity</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00104">labyrinthe.h:104</a></div></div>
<div class="ttc" id="project__defines_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="project__defines_8h_source.html#l00028">project_defines.h:28</a></div></div>
<div class="ttc" id="struct_laby___cell__str_html_a1d127017fb298b889f4ba24752d08b8e"><div class="ttname"><a href="struct_laby___cell__str.html#a1d127017fb298b889f4ba24752d08b8e">Laby_Cell_str::type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00101">labyrinthe.h:101</a></div></div>
<div class="ttc" id="serialization_8h_html_a4f6d63f018385b065d2661bea59520a1"><div class="ttname"><a href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a></div><div class="ttdeci">void BUFFER</div><div class="ttdoc">Redéfinition du type de donnée "void" en BUFFER, plus explicite. </div><div class="ttdef"><b>Definition:</b> <a href="serialization_8h_source.html#l00041">serialization.h:41</a></div></div>
<div class="ttc" id="struct_laby___cell__str_html_a1f17cfc419258de8dcdd21bc5494e489"><div class="ttname"><a href="struct_laby___cell__str.html#a1f17cfc419258de8dcdd21bc5494e489">Laby_Cell_str::param1</a></div><div class="ttdeci">uint16_t param1</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00102">labyrinthe.h:102</a></div></div>
<div class="ttc" id="project__defines_8h_html_a273cf69d639a59973b6019625df33e30"><div class="ttname"><a href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></div><div class="ttdeci">unsigned short uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="project__defines_8h_source.html#l00030">project_defines.h:30</a></div></div>
<div class="ttc" id="struct_laby___entity__str__t_html_a16a7565b150a9c17a39c80fc932b9514"><div class="ttname"><a href="struct_laby___entity__str__t.html#a16a7565b150a9c17a39c80fc932b9514">Laby_Entity_str_t::param2</a></div><div class="ttdeci">uint16_t param2</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00086">labyrinthe.h:86</a></div></div>
<div class="ttc" id="struct_laby___entity__str__t_html_a1d127017fb298b889f4ba24752d08b8e"><div class="ttname"><a href="struct_laby___entity__str__t.html#a1d127017fb298b889f4ba24752d08b8e">Laby_Entity_str_t::type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00084">labyrinthe.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a08b508913be98637331aea21dba2ac5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a>* serialize_labyrinthe_to_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="labyrinthe_8h.html#a635e69b4b8a1e09ca9a01d30559ebec7">Labyrinthe</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction réalisant la conversion d'un labyrinthe vers un buffer de donnée prêt à enregistrer dans un fichier. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>Labyrinthe à enregistrer </td></tr>
    <tr><td class="paramname">s</td><td>Taille du buffer résultant, retournée dans la variable s </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>BUFFER Pointeur vers le buffer contenant les données, NULL en cas d'erreur. </dd></dl>

<p>Définition à la ligne <a class="el" href="serialization_8c_source.html#l00116">116</a> du fichier <a class="el" href="serialization_8c_source.html">serialization.c</a>.</p>

<p>Références <a class="el" href="matrice_8h_source.html#l00037">Matrice::donnees</a>, <a class="el" href="serialization_8h_source.html#l00035">MAGIC_BYTE</a>, <a class="el" href="matrice_8h_source.html#l00039">Matrice::nbcolonnes</a>, <a class="el" href="matrice_8h_source.html#l00038">Matrice::nblignes</a>, et <a class="el" href="serialization_8c_source.html#l00155">serialize_cell()</a>.</p>

<p>Référencé par <a class="el" href="laby__game_8c_source.html#l00194">laby_game_init_options()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                                                              {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a> *buffer = NULL, *pBuffer = NULL;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="struct_laby___cell__str.html">Laby_Cell_str_t</a>** cells;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordtype">int</span> i,j;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span>(lab == NULL)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span>(lab-&gt;<a class="code" href="struct_matrice.html#a0ed1f891ac3730a64bdfc92feec201b2">donnees</a> == NULL)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">/* MAGIC_BYTE + 2x4 octets + (4*2 + 2*1) octets par cellules */</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">if</span>(sizeOfBuffer != NULL)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        *sizeOfBuffer =  1*<span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>) +   2*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) + lab-&gt;<a class="code" href="struct_matrice.html#a345faae7be119ee5b067e36a26801409">nbcolonnes</a>*lab-&gt;<a class="code" href="struct_matrice.html#a12e3728259177655e1c0bdeee024b306">nblignes</a>*(4*<span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>) + 2*<span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>));</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    buffer = (<a class="code" href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a>*)malloc(1*<span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>) + 2*<span class="keyword">sizeof</span>(int) + lab-&gt;<a class="code" href="struct_matrice.html#a345faae7be119ee5b067e36a26801409">nbcolonnes</a>*lab-&gt;<a class="code" href="struct_matrice.html#a12e3728259177655e1c0bdeee024b306">nblignes</a>*(4*<span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>) + 2*<span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span>(buffer == NULL)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    pBuffer = buffer;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    *((<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>*)pBuffer) = <a class="code" href="serialization_8h.html#a3455653da0de1178f9b079fb7d6626be">MAGIC_BYTE</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(<a class="code" href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    memcpy(pBuffer, &amp;(lab-&gt;<a class="code" href="struct_matrice.html#a12e3728259177655e1c0bdeee024b306">nblignes</a>), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(int);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    memcpy(pBuffer, &amp;(lab-&gt;<a class="code" href="struct_matrice.html#a345faae7be119ee5b067e36a26801409">nbcolonnes</a>), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    pBuffer = ((<span class="keywordtype">char</span>*)pBuffer) + <span class="keyword">sizeof</span>(int);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    cells = (<a class="code" href="struct_laby___cell__str.html">Laby_Cell_str_t</a>**)lab-&gt;<a class="code" href="struct_matrice.html#a0ed1f891ac3730a64bdfc92feec201b2">donnees</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; lab-&gt;<a class="code" href="struct_matrice.html#a12e3728259177655e1c0bdeee024b306">nblignes</a>; i++)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">for</span>(j = 0; j &lt; lab-&gt;<a class="code" href="struct_matrice.html#a345faae7be119ee5b067e36a26801409">nbcolonnes</a>; j++)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            pBuffer = <a class="code" href="serialization_8c.html#af5e046ccb8922f6fe7a22de1a2712ff2">serialize_cell</a>(pBuffer, &amp;cells[i][j]);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">return</span> buffer;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div>
<div class="ttc" id="struct_matrice_html_a345faae7be119ee5b067e36a26801409"><div class="ttname"><a href="struct_matrice.html#a345faae7be119ee5b067e36a26801409">Matrice::nbcolonnes</a></div><div class="ttdeci">int nbcolonnes</div><div class="ttdef"><b>Definition:</b> <a href="matrice_8h_source.html#l00039">matrice.h:39</a></div></div>
<div class="ttc" id="serialization_8h_html_a3455653da0de1178f9b079fb7d6626be"><div class="ttname"><a href="serialization_8h.html#a3455653da0de1178f9b079fb7d6626be">MAGIC_BYTE</a></div><div class="ttdeci">#define MAGIC_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="serialization_8h_source.html#l00035">serialization.h:35</a></div></div>
<div class="ttc" id="struct_laby___cell__str_html"><div class="ttname"><a href="struct_laby___cell__str.html">Laby_Cell_str</a></div><div class="ttdoc">Structure représentative d&#39;une cellule, pointant vers les cellules adjacentes et disposant d&#39;informat...</div><div class="ttdef"><b>Definition:</b> <a href="labyrinthe_8h_source.html#l00098">labyrinthe.h:98</a></div></div>
<div class="ttc" id="project__defines_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="project__defines_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="project__defines_8h_source.html#l00028">project_defines.h:28</a></div></div>
<div class="ttc" id="struct_matrice_html_a12e3728259177655e1c0bdeee024b306"><div class="ttname"><a href="struct_matrice.html#a12e3728259177655e1c0bdeee024b306">Matrice::nblignes</a></div><div class="ttdeci">int nblignes</div><div class="ttdef"><b>Definition:</b> <a href="matrice_8h_source.html#l00038">matrice.h:38</a></div></div>
<div class="ttc" id="serialization_8h_html_a4f6d63f018385b065d2661bea59520a1"><div class="ttname"><a href="serialization_8h.html#a4f6d63f018385b065d2661bea59520a1">BUFFER</a></div><div class="ttdeci">void BUFFER</div><div class="ttdoc">Redéfinition du type de donnée "void" en BUFFER, plus explicite. </div><div class="ttdef"><b>Definition:</b> <a href="serialization_8h_source.html#l00041">serialization.h:41</a></div></div>
<div class="ttc" id="struct_matrice_html_a0ed1f891ac3730a64bdfc92feec201b2"><div class="ttname"><a href="struct_matrice.html#a0ed1f891ac3730a64bdfc92feec201b2">Matrice::donnees</a></div><div class="ttdeci">void ** donnees</div><div class="ttdef"><b>Definition:</b> <a href="matrice_8h_source.html#l00037">matrice.h:37</a></div></div>
<div class="ttc" id="project__defines_8h_html_a273cf69d639a59973b6019625df33e30"><div class="ttname"><a href="project__defines_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></div><div class="ttdeci">unsigned short uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="project__defines_8h_source.html#l00030">project_defines.h:30</a></div></div>
<div class="ttc" id="serialization_8c_html_af5e046ccb8922f6fe7a22de1a2712ff2"><div class="ttname"><a href="serialization_8c.html#af5e046ccb8922f6fe7a22de1a2712ff2">serialize_cell</a></div><div class="ttdeci">BUFFER * serialize_cell(BUFFER *dst, const Laby_Cell_str_t *cell)</div><div class="ttdoc">Sous-fonction réalisant la sérialisation d&#39;une cellule vers un BUFFER. Par convéniance, la fonction prend en entrée un BUFFER* initial et retourne un autre pointeur vers ce même buffer, pointant après la dernière donnée ajoutée. 10 octets seront stockés : Cellule avec entité : <(1)type><(2)param1><(2)param2><(1)type><(2)param1><(2)param2> Cellule sans entité : <(1)type><(2)param1><(2)param2><0x00><0x0000><0x0000> </div><div class="ttdef"><b>Definition:</b> <a href="serialization_8c_source.html#l00155">serialization.c:155</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="serialization_8c.html">serialization.c</a></li>
    <li class="footer">Généré le Dimanche 16 Novembre 2014 16:23:37 pour Labyrinthe par
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
